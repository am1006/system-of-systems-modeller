<!doctype html>

<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		
		<!-- Additional JavaScript & CSS -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<!-- CDN Delivererd -->
		<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->

		<!-- Keeping the Bootstrap 4.6.1 CSS as the btn.info class looks terrible under 5.1.3, as does the modal close (x) button -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.21.0/cytoscape.min.js"></script>

		<!-- Locally Sourced
			<link rel="stylesheet" href="./css/bootstrap.min.css">
			<script src="./clientSide/jquery-3.5.1.min.js"></script>
			<script src="./clientSide/popper.min.js"></script>
			<script src="./clientSide/bootstrap.min.js"></script>
			<script src="./clientSide/cytoscape.min.js"></script>

			
		-->

		<link rel="stylesheet" href="./css/style.css">

		<!-- Page scripts -->
		<script src="./clientSide/Node.js" type="text/javascript" defer></script>
		<script src="./clientSide/NodeModal.js" type="text/javascript" defer></script>
		<script src="./clientSide/GraphSettings.js" type="text/javascript" defer></script>

		<script src="./clientSide/helpers.js" type="text/javascript" defer></script>
		<script src="./clientSide/modals.js" type="text/javascript" defer></script>
		<script src="./clientSide/index.js" type="text/javascript" defer></script>
		<script src="./clientSide/events.js" type="text/javascript" defer></script>

		<title>System of Systems Modeller</title>

	</head>
	<body>

		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand" href="#">SOSM</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">

				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Update</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<!--<a id="nodeConnections" class="dropdown-item" href="#">Node Connections</a> -->
						<a class="dropdown-item" href="#" onclick="update_subsystem()">Subsystems</a>
						<a class="dropdown-item" href="#" onclick="update_interface()">Interfaces</a>
						<a class="dropdown-item" href="#" onclick="update_features()">Interface Features</a>
						<a class="dropdown-item" href="#" onclick="update_network()">Networks</a>
					</div>
				</li>

				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">View</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="#" onclick="view_graph()">Graph</a>
						<a class="dropdown-item" href="#" onclick="view_summary()">System Summary</a>
						<a class="dropdown-item" href="#" onclick="view_issues()">Issue Summary</a>
					</div>
				</li>


				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Maintenance</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="#">Unattached Interfaces</a>
						<a class="dropdown-item" href="/backup.txt" target="_blank">Backup</a>
					</div>
				</li>
			</div>
		</nav>
		<h2 id="pageTitle" class="text-center">System Design</h2>
		<div class="d-flex px-3" id="wrapper">
			<!-- Sidebar
			<a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">Dashboard</a>
			-->
			<div class="border-end bg-white" id="sidebar-wrapper">
				<div class="sidebar-heading border-bottom bg-dark text-white px-2"><h5 class="my-0">Graph Manipulation</h5></div>
				<div id="sidebarGraph" class="">
					<div class="row">
						<div class="col">
							<button type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="decrementYearButton()">Decrement Year</button>
						</div>
						<div class="col">
							<button type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="incrementYearButton()">Increment Year</button>
						</div>
					</div>	
					<button id="hideNodeToggleButton" type="button" class="btn btn-secondary btn-sm btn-block my-1" onclick="hideNodesButton()">Hide Node Toggle</button>
					<button id="graphSettings" type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="settingsModal()">Graph Settings</button>
					
					<button id="savePng" type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="savePng()">Save PNG</button>
					
					
					
					<div class="row">
						<div class="col">
							<button id="reorgGraph" type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="reorgGraph()">Reorganise Graph</button>
						</div>
						<div class="col">
							<button id="redrawGraph" type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="newCy()">Redraw Graph</button>
						</div>
					</div>	
					
					

				</div>
				<div class="sidebar-heading border-bottom bg-dark text-white px-2"><h5 class="my-0">Selected Node Details</h5></div>
				<div id="sidebarInterface" class="">
					<table id="nodeDetailsTable" class="table table-sm mx-1">
					<tbody>

					</tbody>
					</table>

					<button id="editNodeButton" type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="editNodeButton()">Edit Node</button>
					<button id="hideNode" type="button" class="btn btn-primary btn-sm btn-block my-1" onclick="hideSelectedNodeButton()">Hide Selected Node</button>
					
					

				</div>
			</div>

			<!-- Page Content -->
			<div id="mainPaneContainer" class="container-fluid">
				<div class="row">
					<div class="col">
					
					<div id="cy" class="px-1"></div>
					</div>
				</div>
			</div>
		</div>

		<!-- Modals -->
		<!-- Add / Edit Node -->
		<div class="modal" tabindex="-1" role="dialog" id="nodeModal">
			<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
				<h5 id="nodeModalTitle" class="modal-title">Modal title</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				</div>
				<div class="modal-body">
				<p id="nodeModalNodeDescription"></p>
				<form id="formNodeModal">
				</form>
				</div>
				<div class="modal-footer">
				<span id="nodeModalWarning" class="badge rounded-pill bg-danger text-white" hidden>Test</span>
				<button id="nodeModalDeleteButton" type="button" class="btn btn-danger">Delete</button>
				<button id="nodeModalSubmit" type="button" class="btn btn-primary">Save changes</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				</div>
			</div>
			</div>
		</div>

		<!-- Add Icon -->
		<div class="modal" tabindex="-1" role="dialog" id="iconModal">
			<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
				<h5 id="attachIconModalTitle" class="modal-title">Assign Icon</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				</div>
				<div class="modal-body">
				<div id="iconContainer"></div>
				</div>
				<div class="modal-footer">
				<button id="iconModalSave" type="button" class="btn btn-primary">Save changes</button>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				</div>
			</div>
			</div>
		</div>

		<!-- Edit Interface -->
		<div class="modal" tabindex="-1" role="dialog" id="editInterfaceModal">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
				<div class="modal-header">
					<h5 id="editInterfaceModalTitle" class="modal-title">Select Interface</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					
				</div>
				<div class="modal-footer">
					<button id="editInterfaceNext" type="button" class="btn btn-primary">Next</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				</div>
				</div>
			</div>
		</div>
			

		<!-- Interfaces to Subsystem Modal -->
		<div class="modal" tabindex="-1" role="dialog" id="mappingModal">
			<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
				<h5 class="modal-title">Assign Interfaces to Subsystems</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				</div>
				<div class="modal-body">
				<div class="text-center">
					<div id="mappingModalImageContainer" class="container">
					<h5 id="mappingModalTitle1">CL</h5>
					<img id="mappingModalImage" src="" width="100px" height="100px">
					</div>
				</div>
				<h5 id="mappingModalTitle2">Interfaces</h5>
				<form>
					<div class="form-group">
					<!--<label id="mappingModalSelectLabel" for="mappingModalSelect"></label>-->
					<select class="form-control" id="mappingModalSelect">
					</select>
					</div>
				</form>
				<button id="mappingModalAddButton" type="button" class="btn btn-primary btn-block my-1 text-center"></button>
				<h5 id="mappingModalTitle3">Installed Interfaces</h5>
				<div id="mappingModalContainer"></div>
				</div>
				<div class="modal-footer">
				<span id="mappingModalWarning" class="badge rounded-pill bg-danger d-none text-white"></span>
				<button id="mappingModalDeleteButton" type="button" class="btn btn-danger" disabled>Delete</button>
				<!--<button type="button" class="btn btn-primary">Save changes</button>-->
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
			</div>
		</div>

		<!-- Main Modal Interface -->
		<div class="modal" tabindex="-1" role="dialog" id="mainModal">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
				<div class="modal-header">
					<h5 id="mainModalTitle" class="modal-title">Main Modal</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					
				</div>
				<div class="modal-footer">
					<div class="warning-holder"></div>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">SHOULDNT SEE</button>
				</div>
				</div>
			</div>
		</div>

		<!-- Support Modal Interface -->
		<div class="modal" tabindex="-1" role="dialog" id="supportModal">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
				<div class="modal-header">
					<h5 id="supportModalTitle" class="modal-title">Main Modal</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Test</p>
					<form>
						<div class="form-row">
							<div class="col">
								<input type="number" class="form-control" value="2020">
							</div>
							<div class="col">
								<input type="number" class="form-control">
							</div>
							
						</div>
						<div class="row justify-content-end my-2">
							<div class="col-auto">
								<button class="btn btn-primary">Add New Fields</button>
								<button class="btn btn-primary">Remove Last Field</button>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<div class="warning-holder"></div>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">SHOULDNT SEE</button>
				</div>
				</div>
			</div>
		</div>
	</body>
</html>
